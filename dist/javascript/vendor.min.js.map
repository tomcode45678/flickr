{"version":3,"sources":["javascript/display-images.js","javascript/main.js"],"names":[],"mappings":"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","file":"vendor.min.js","sourcesContent":["const SAVED = 'saved';\n\nexport default class DisplayImages {\n  constructor (data) {\n    this.images = data.items;\n    this.imageContainer = document.querySelector('[data-image-container]');\n    this.savedImages = JSON.parse(localStorage.getItem('savedImages')) || [];\n\n    if (this.imageContainer) {\n      this.renderAssets(data.items);\n      this.bindEvents();\n    }\n  }\n\n  renderAssets(assets) {\n    let imageFragments = document.createDocumentFragment();\n\n    for (let i = 0, assetsLength = assets.length; i < assetsLength; i++) {\n      let asset = assets[i];\n      imageFragments.appendChild(this.renderAsset(asset));\n    }\n    this.imageContainer.appendChild(imageFragments);\n  }\n\n  renderAsset(asset) {\n    let imageCardClass = 'mdl-card mdl-shadow--2dp';\n    let imageCard = document.createElement('article');\n\n    let desc = document.createElement('div');\n    desc.innerHTML = asset.description;\n    let image = desc.querySelector('img');\n\n    if (this.savedImage(image)) {\n      imageCardClass = `${imageCardClass} ${SAVED}`;\n    }\n    imageCard.className = imageCardClass;\n\n    let imageCardActions = document.createElement('div');\n    imageCardActions.className = 'mdl-card__actions';\n\n    let imageCardTitle = document.createElement('div');\n    imageCardTitle.className = 'card-image card-image__title';\n\n    let imageTitle = document.createTextNode(asset.title);\n    imageCardTitle.appendChild(imageTitle);\n\n    let imageCardSaved = document.createElement('div');\n    imageCardSaved.className = 'card-image card-image__saved';\n\n    imageCardSaved.innerHTML = '&#x2665;';\n\n    imageCardActions.appendChild(imageCardTitle);\n    imageCardActions.appendChild(imageCardSaved);\n\n    imageCard.appendChild(image);\n    imageCard.appendChild(imageCardActions);\n    return imageCard;\n  }\n\n  bindEvents() {\n    this.imageContainer.addEventListener('click', this.selectedHandler.bind(this));\n  }\n\n  selectedHandler(e) {\n    let target = e.target;\n\n    if (target.nodeName !== \"ARTICLE\") {\n      target = target.parentNode;\n      if (target.className === 'mdl-card__actions') {\n        target = target.parentNode;\n      }\n    }\n\n    target.classList.toggle(SAVED);\n    this.toggleSavedImage(target, target.querySelector('img'));\n  }\n\n  toggleSavedImage(imageCard, selectedImage) {\n    if (imageCard.classList.contains(SAVED)) {\n      this.savedImages.push(selectedImage.src);\n    }\n    else {\n      this.removeSavedImage(selectedImage.src);\n    }\n    this.setSavedImages();\n  }\n\n  removeSavedImage(selectedImage) {\n    for (let i = 0; i < this.savedImages.length; i++) {\n      let image = this.savedImages[i];\n      if (selectedImage === image) {\n        this.savedImages.splice(i, 1);\n      }\n    }\n  }\n\n  setSavedImages() {\n    localStorage.removeItem('savedImages');\n    localStorage.setItem('savedImages', JSON.stringify(this.savedImages));\n  }\n\n  savedImage(image) {\n    let result = false;\n\n    for (let i = 0; i < this.savedImages.length; i++) {\n      let savedImage = this.savedImages[i];\n      if (image.src === savedImage) {\n        result = true;\n        break;\n      }\n    }\n    return result;\n  }\n}\n","import DisplayImages from './display-images';\n\nconst TAGS = 'london';\nconst API = `http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=dataHandler&tags=${TAGS}`;\nconst loadingSpinner = document.querySelector('[data-loading-spinner]');\n\nwindow.dataHandler = function (data) {\n  new DisplayImages(data);\n  loadingSpinner.classList.remove('spinner--show');\n};\n\nlet script = document.createElement('script');\nscript.src = API;\n\nscript.onerror = function () {\n  let sorryMessage = document.createElement('div');\n  let sorry = document.createTextNode(`\n    We're sorry, we could not retrieve any images from Flickr.\n    This is most likely connectivity issues, please make sure you are still connected to the internet.\n  `);\n\n  sorryMessage.appendChild(sorry);\n  document.body.appendChild(sorryMessage);\n  loadingSpinner.classList.remove('spinner--show');\n};\n\ndocument.body.appendChild(script);\n"],"sourceRoot":"/source/"}