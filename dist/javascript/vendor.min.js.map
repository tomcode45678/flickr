{"version":3,"sources":["javascript/api.js","javascript/display-images.js","javascript/main.js","javascript/page-loader.js"],"names":[],"mappings":"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","file":"vendor.min.js","sourcesContent":["const loadingSpinner = document.querySelector('[data-loading-spinner]');\n\nexport default class API {\n  constructor (url, callback, dataHandler, clearContent) {\n    this.setHandler(callback, dataHandler);\n    this.loadUrl(url, clearContent);\n  }\n\n  setHandler(callback, dataHandler) {\n    window[callback] = function (data) {\n      new dataHandler(data);\n      loadingSpinner.classList.remove('spinner--show');\n    };\n  }\n\n  clearUI(clearContent) {\n    loadingSpinner.classList.add(\"spinner--show\");\n    if (clearContent) {\n      clearContent.innerHTML = '';\n    }\n  }\n\n  loadUrl(url, clearContent) {\n    let script = document.createElement('script');\n    script.src = url;\n    this.clearUI(clearContent);\n\n    script.onerror = function () {\n      let sorryMessage = document.createElement('div');\n      let sorry = document.createTextNode(`\n        We're sorry, we could not retrieve any images from Flickr.\n        This is most likely connectivity issues, please make sure you are still connected to the internet.\n      `);\n\n      sorryMessage.appendChild(sorry);\n      document.body.appendChild(sorryMessage);\n      loadingSpinner.classList.remove('spinner--show');\n    };\n\n    document.body.appendChild(script);\n  }\n}\n","const SAVED = 'saved';\n\nexport default class DisplayImages {\n  constructor (data) {\n    if (!data) {\n      return;\n    }\n\n    this.images = data.items;\n    this.imageContainer = document.querySelector('[data-image-container]');\n    this.savedImages = JSON.parse(localStorage.getItem('savedImages')) || [];\n\n    if (this.imageContainer) {\n      this.renderAssets(data.items);\n      this.bindEvents();\n    }\n  }\n\n  renderAssets(assets) {\n    let imageFragments = document.createDocumentFragment();\n\n    for (let i = 0, assetsLength = assets.length; i < assetsLength; i++) {\n      let asset = assets[i];\n      imageFragments.appendChild(this.renderAsset(asset));\n    }\n    this.imageContainer.appendChild(imageFragments);\n  }\n\n  renderAsset(asset) {\n    let imageCardClass = 'mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--8-col-phone mdl-card mdl-shadow--2dp';\n    let imageCard = document.createElement('article');\n\n    let desc = document.createElement('div');\n    desc.innerHTML = asset.description;\n    let image = desc.querySelector('img');\n\n    if (this.savedImage(image)) {\n      imageCardClass = `${imageCardClass} ${SAVED}`;\n    }\n    imageCard.className = imageCardClass;\n\n    let imageCardActions = document.createElement('div');\n    imageCardActions.className = 'mdl-card__actions';\n\n    let imageCardTitle = document.createElement('div');\n    imageCardTitle.className = 'card-image card-image__title';\n\n    let imageTitle = document.createTextNode(asset.title);\n    imageCardTitle.appendChild(imageTitle);\n\n    let imageCardSaved = document.createElement('div');\n    imageCardSaved.className = 'card-image card-image__saved';\n\n    imageCardSaved.innerHTML = '&#x2665;';\n\n    imageCardActions.appendChild(imageCardTitle);\n    imageCardActions.appendChild(imageCardSaved);\n\n    imageCard.appendChild(image);\n    imageCard.appendChild(imageCardActions);\n    return imageCard;\n  }\n\n  bindEvents() {\n    this.imageContainer.addEventListener('click', this.selectedHandler.bind(this));\n  }\n\n  selectedHandler(e) {\n    let target = e.target;\n\n    if (target.nodeName !== \"ARTICLE\") {\n      target = target.parentNode;\n      if (target.className === 'mdl-card__actions') {\n        target = target.parentNode;\n      }\n    }\n\n    target.classList.toggle(SAVED);\n    this.toggleSavedImage(target, target.querySelector('img'));\n  }\n\n  toggleSavedImage(imageCard, selectedImage) {\n    if (imageCard.classList.contains(SAVED)) {\n      this.savedImages.push(selectedImage.src);\n    }\n    else {\n      this.removeSavedImage(selectedImage.src);\n    }\n    this.setSavedImages();\n  }\n\n  removeSavedImage(selectedImage) {\n    for (let i = 0; i < this.savedImages.length; i++) {\n      let image = this.savedImages[i];\n      if (selectedImage === image) {\n        this.savedImages.splice(i, 1);\n      }\n    }\n  }\n\n  setSavedImages() {\n    localStorage.removeItem('savedImages');\n    localStorage.setItem('savedImages', JSON.stringify(this.savedImages));\n  }\n\n  savedImage(image) {\n    let result = false;\n\n    for (let i = 0; i < this.savedImages.length; i++) {\n      let savedImage = this.savedImages[i];\n      if (image.src === savedImage) {\n        result = true;\n        break;\n      }\n    }\n    return result;\n  }\n\n  renderSaved() {\n    this.renderAssets(this.images);\n  }\n}\n","import API from './api';\nimport DisplayImages from './display-images';\nimport PageLoader from './page-loader';\n\nconst TAGS = 'beautiful landscape';\nconst callback = 'dataHandler';\nconst URL_PATH = `http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=${callback}&tags=${TAGS}`;\nconst imageContainer = document.querySelector('[data-image-container]');\n\nfunction urlRequest () {\n  new API(URL_PATH, callback, DisplayImages, imageContainer);\n}\n\nurlRequest();\n\nlet pageActions = [\n  { page: 'index', callback: urlRequest },\n  { page: 'saved', callback: 'dataHandler.renderSaved' }\n];\n\nnew PageLoader(pageActions);\n","const DEFAULT_NAV = document.querySelectorAll('[data-nav]');\nconst LAYOUT = document.querySelector('[data-mdl-layout]');\nconst DRAWER = document.querySelector('[data-drawer]');\n\nexport default class PageLoader {\n  constructor (pageCallbacks, navigations = DEFAULT_NAV) {\n    this.pageCallbacks = pageCallbacks;\n    this.bindEvents(navigations);\n  }\n\n  bindEvents(navigations) {\n    for (let i = 0, navigationsLength = navigations.length; i < navigationsLength; i++) {\n      navigations[i].addEventListener('click', this.pageEventHandler.bind(this));\n    }\n  }\n\n  pageEventHandler(e) {\n    let target = e.target;\n    if (!target) {\n      return;\n    }\n\n    const DATA_ATTRIBUTE = 'data-page';\n\n    if (target.nodeName === 'SPAN') {\n      target = target.parentNode;\n    }\n\n    if (target.nodeName === \"A\" && target.hasAttribute(DATA_ATTRIBUTE)) {\n      this.loadPage(target.getAttribute(DATA_ATTRIBUTE));\n    }\n    e.preventDefault();\n  }\n\n  loadPage(page) {\n    if (LAYOUT && DRAWER && DRAWER.classList.contains('is-visible')) {\n      LAYOUT.MaterialLayout.toggleDrawer();\n    }\n\n    for (let i = 0, pageCallbacksLength = this.pageCallbacks.length; i < pageCallbacksLength; i++) {\n      let callbackOption = this.pageCallbacks[i];\n      if (callbackOption.page === page) {\n        callbackOption.callback();\n      }\n    }\n  }\n}\n"],"sourceRoot":"/source/"}