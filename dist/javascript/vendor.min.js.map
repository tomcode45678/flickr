{"version":3,"sources":["vendor.min.js","javascript/api.js","javascript/display-images.js","javascript/main.js","javascript/page-loader.js"],"names":["System","register","_export","_context","_classCallCheck","instance","Constructor","TypeError","_createClass","loadingSpinner","requestComplete","API","setters","execute","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","document","querySelector","classList","remove","url","callback","dataHandler","clearContent","this","setHandler","loadUrl","value","window","data","add","innerHTML","script","createElement","src","clearUI","onerror","sorryMessage","sorry","createTextNode","appendChild","body","_typeof","SAVED","DisplayImages","Symbol","iterator","obj","constructor","imageContainer","savedImages","JSON","parse","localStorage","getItem","bindEvents","renderAssets","items","assets","imageFragments","createDocumentFragment","assetsLength","asset","renderAsset","imageCardClass","imageCard","imageSrc","image","desc","description","savedImage","className","imageCardActions","imageCardTitle","title","imageTitle","imageCardSaved","_this","addEventListener","e","selectedHandler","nodeName","parentNode","toggle","toggleSavedImage","selectedImage","contains","push","removeSavedImage","setSavedImages","splice","removeItem","setItem","stringify","result","PageLoader","TAGS","URL_PATH","lastAPICall","displayImages","urlRequest","renderSavedImages","_api","_displayImages","_pageLoader","render","bind","renderSaved","page","DEFAULT_NAV","LAYOUT","DRAWER","querySelectorAll","pageCallbacks","navigations","arguments","undefined","navigationsLength","pageEventHandler","DATA_ATTRIBUTE","hasAttribute","loadPage","getAttribute","preventDefault","MaterialLayout","toggleDrawer","pageCallbacksLength","callbackOption"],"mappings":"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","file":"vendor.min.js","sourcesContent":["'use strict';\n\nSystem.register('javascript/api', [], function (_export, _context) {\n  var _createClass, loadingSpinner, requestComplete, API;\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  return {\n    setters: [],\n    execute: function () {\n      _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }();\n\n      loadingSpinner = document.querySelector('[data-loading-spinner]');\n\n      requestComplete = function requestComplete() {\n        return loadingSpinner.classList.remove('spinner--show');\n      };\n\n      API = function () {\n        function API(url, callback, dataHandler, clearContent) {\n          _classCallCheck(this, API);\n\n          this.setHandler(callback, dataHandler);\n          this.loadUrl(url, clearContent);\n          this.requestComplete = requestComplete;\n        }\n\n        _createClass(API, [{\n          key: 'setHandler',\n          value: function setHandler(callback, dataHandler) {\n            window[callback] = function (data) {\n              dataHandler(data);\n              requestComplete();\n            };\n          }\n        }, {\n          key: 'clearUI',\n          value: function clearUI(clearContent) {\n            loadingSpinner.classList.add(\"spinner--show\");\n            if (clearContent) {\n              clearContent.innerHTML = '';\n            }\n          }\n        }, {\n          key: 'loadUrl',\n          value: function loadUrl(url, clearContent) {\n            var script = document.createElement('script');\n            script.src = url;\n            this.clearUI(clearContent);\n\n            script.onerror = function () {\n              var sorryMessage = document.createElement('div');\n              var sorry = document.createTextNode('\\n        We\\'re sorry, we could not retrieve any images from Flickr.\\n        This is most likely connectivity issues, please make sure you are still connected to the internet.\\n      ');\n\n              sorryMessage.appendChild(sorry);\n              document.body.appendChild(sorryMessage);\n              requestComplete();\n            };\n\n            document.body.appendChild(script);\n          }\n        }]);\n\n        return API;\n      }();\n\n      _export('default', API);\n    }\n  };\n});\n'use strict';\n\nSystem.register('javascript/display-images', [], function (_export, _context) {\n  var _typeof, _createClass, SAVED, DisplayImages;\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  return {\n    setters: [],\n    execute: function () {\n      _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n      };\n\n      _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }();\n\n      SAVED = 'saved';\n\n      DisplayImages = function () {\n        function DisplayImages(imageContainer) {\n          _classCallCheck(this, DisplayImages);\n\n          this.imageContainer = imageContainer;\n          this.savedImages = JSON.parse(localStorage.getItem('savedImages')) || [];\n\n          if (imageContainer) {\n            this.bindEvents(imageContainer);\n          }\n        }\n\n        _createClass(DisplayImages, [{\n          key: 'render',\n          value: function render(data) {\n            this.renderAssets(data.items);\n          }\n        }, {\n          key: 'renderSaved',\n          value: function renderSaved(callback) {\n            this.renderAssets(this.savedImages);\n            callback();\n          }\n        }, {\n          key: 'renderAssets',\n          value: function renderAssets(assets) {\n            var imageFragments = document.createDocumentFragment();\n\n            for (var i = 0, assetsLength = assets.length; i < assetsLength; i++) {\n              var asset = assets[i];\n              imageFragments.appendChild(this.renderAsset(asset));\n            }\n            this.imageContainer.appendChild(imageFragments);\n          }\n        }, {\n          key: 'renderAsset',\n          value: function renderAsset(asset) {\n            var imageCardClass = 'mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--8-col-phone mdl-card mdl-shadow--2dp';\n            var imageCard = document.createElement('article');\n            var imageSrc = asset;\n            var image = null;\n\n            if ((typeof asset === 'undefined' ? 'undefined' : _typeof(asset)) === 'object') {\n              var desc = document.createElement('div');\n              desc.innerHTML = asset.description;\n              image = desc.querySelector('img');\n              imageSrc = image.src;\n            } else {\n              image = document.createElement('img');\n              image.src = imageSrc;\n            }\n\n            if (this.savedImage(imageSrc)) {\n              imageCardClass = imageCardClass + ' ' + SAVED;\n            }\n            imageCard.className = imageCardClass;\n\n            var imageCardActions = document.createElement('div');\n            imageCardActions.className = 'mdl-card__actions';\n\n            var imageCardTitle = document.createElement('div');\n            imageCardTitle.className = 'card-image card-image__title';\n\n            if (asset.title) {\n              var imageTitle = document.createTextNode(asset.title);\n              imageCardTitle.appendChild(imageTitle);\n            }\n\n            var imageCardSaved = document.createElement('div');\n            imageCardSaved.className = 'card-image card-image__saved';\n\n            imageCardSaved.innerHTML = '&#x2665;';\n\n            imageCardActions.appendChild(imageCardTitle);\n            imageCardActions.appendChild(imageCardSaved);\n\n            imageCard.appendChild(image);\n            imageCard.appendChild(imageCardActions);\n            return imageCard;\n          }\n        }, {\n          key: 'bindEvents',\n          value: function bindEvents(imageContainer) {\n            var _this = this;\n\n            imageContainer.addEventListener('click', function (e) {\n              return _this.selectedHandler(e);\n            });\n          }\n        }, {\n          key: 'selectedHandler',\n          value: function selectedHandler(e) {\n            var target = e.target;\n\n            while (target.nodeName !== \"ARTICLE\" && target !== document) {\n              target = target.parentNode;\n            }\n\n            if (target === document) {\n              return;\n            }\n\n            target.classList.toggle(SAVED);\n            this.toggleSavedImage(target, target.querySelector('img'));\n          }\n        }, {\n          key: 'toggleSavedImage',\n          value: function toggleSavedImage(imageCard, selectedImage) {\n            if (imageCard.classList.contains(SAVED)) {\n              this.savedImages.push(selectedImage.src);\n            } else {\n              this.removeSavedImage(selectedImage.src);\n            }\n            this.setSavedImages();\n          }\n        }, {\n          key: 'removeSavedImage',\n          value: function removeSavedImage(selectedImage) {\n            for (var i = 0; i < this.savedImages.length; i++) {\n              var image = this.savedImages[i];\n              if (selectedImage === image) {\n                this.savedImages.splice(i, 1);\n                break;\n              }\n            }\n          }\n        }, {\n          key: 'setSavedImages',\n          value: function setSavedImages() {\n            localStorage.removeItem('savedImages');\n            localStorage.setItem('savedImages', JSON.stringify(this.savedImages));\n          }\n        }, {\n          key: 'savedImage',\n          value: function savedImage(imageSrc) {\n            var result = false;\n\n            for (var i = 0; i < this.savedImages.length; i++) {\n              var savedImage = this.savedImages[i];\n              if (imageSrc === savedImage) {\n                result = true;\n                break;\n              }\n            }\n            return result;\n          }\n        }]);\n\n        return DisplayImages;\n      }();\n\n      _export('default', DisplayImages);\n    }\n  };\n});\n'use strict';\n\nSystem.register('javascript/main', ['./api', './display-images', './page-loader'], function (_export, _context) {\n  var API, DisplayImages, PageLoader, TAGS, callback, URL_PATH, imageContainer, lastAPICall, displayImages, urlRequest, renderSavedImages;\n  return {\n    setters: [function (_api) {\n      API = _api.default;\n    }, function (_displayImages) {\n      DisplayImages = _displayImages.default;\n    }, function (_pageLoader) {\n      PageLoader = _pageLoader.default;\n    }],\n    execute: function () {\n      TAGS = 'beautiful landscape';\n      callback = 'dataHandler';\n      URL_PATH = 'http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=' + callback + '&tags=' + TAGS;\n      imageContainer = document.querySelector('[data-image-container]');\n      lastAPICall = null;\n      displayImages = new DisplayImages(imageContainer);\n\n      urlRequest = function urlRequest() {\n        lastAPICall = new API(URL_PATH, callback, displayImages.render.bind(displayImages), imageContainer);\n      };\n\n      urlRequest();\n\n      renderSavedImages = function renderSavedImages() {\n        lastAPICall.clearUI(imageContainer);\n        displayImages.renderSaved(lastAPICall.requestComplete);\n      };\n\n      new PageLoader([{ page: 'index', callback: urlRequest }, { page: 'saved', callback: renderSavedImages }]);\n    }\n  };\n});\n'use strict';\n\nSystem.register('javascript/page-loader', [], function (_export, _context) {\n  var _createClass, DEFAULT_NAV, LAYOUT, DRAWER, PageLoader;\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  return {\n    setters: [],\n    execute: function () {\n      _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }();\n\n      DEFAULT_NAV = document.querySelectorAll('[data-nav]');\n      LAYOUT = document.querySelector('[data-mdl-layout]');\n      DRAWER = document.querySelector('[data-drawer]');\n\n      PageLoader = function () {\n        function PageLoader(pageCallbacks) {\n          var navigations = arguments.length <= 1 || arguments[1] === undefined ? DEFAULT_NAV : arguments[1];\n\n          _classCallCheck(this, PageLoader);\n\n          this.pageCallbacks = pageCallbacks;\n          this.bindEvents(navigations);\n        }\n\n        _createClass(PageLoader, [{\n          key: 'bindEvents',\n          value: function bindEvents(navigations) {\n            var _this = this;\n\n            for (var i = 0, navigationsLength = navigations.length; i < navigationsLength; i++) {\n              navigations[i].addEventListener('click', function (e) {\n                return _this.pageEventHandler(e);\n              });\n            }\n          }\n        }, {\n          key: 'pageEventHandler',\n          value: function pageEventHandler(e) {\n            var target = e.target;\n            if (!target) {\n              return;\n            }\n\n            var DATA_ATTRIBUTE = 'data-page';\n\n            if (target.nodeName === 'SPAN' || target.nodeName === 'I') {\n              target = target.parentNode;\n            }\n\n            if (target.nodeName === \"A\" && target.hasAttribute(DATA_ATTRIBUTE)) {\n              this.loadPage(target.getAttribute(DATA_ATTRIBUTE));\n            }\n            e.preventDefault();\n          }\n        }, {\n          key: 'loadPage',\n          value: function loadPage(page) {\n            if (LAYOUT && DRAWER && DRAWER.classList.contains('is-visible')) {\n              LAYOUT.MaterialLayout.toggleDrawer();\n            }\n\n            for (var i = 0, pageCallbacksLength = this.pageCallbacks.length; i < pageCallbacksLength; i++) {\n              var callbackOption = this.pageCallbacks[i];\n              if (callbackOption.page === page) {\n                callbackOption.callback();\n              }\n            }\n          }\n        }]);\n\n        return PageLoader;\n      }();\n\n      _export('default', PageLoader);\n    }\n  };\n});","const loadingSpinner = document.querySelector('[data-loading-spinner]');\nlet requestComplete = () => loadingSpinner.classList.remove('spinner--show');\n\nexport default class API {\n  constructor (url, callback, dataHandler, clearContent) {\n    this.setHandler(callback, dataHandler);\n    this.loadUrl(url, clearContent);\n    this.requestComplete = requestComplete;\n  }\n\n  setHandler(callback, dataHandler) {\n    window[callback] = function (data) {\n      dataHandler(data);\n      requestComplete();\n    };\n  }\n\n  clearUI(clearContent) {\n    loadingSpinner.classList.add(\"spinner--show\");\n    if (clearContent) {\n      clearContent.innerHTML = '';\n    }\n  }\n\n  loadUrl(url, clearContent) {\n    let script = document.createElement('script');\n    script.src = url;\n    this.clearUI(clearContent);\n\n    script.onerror = function () {\n      let sorryMessage = document.createElement('div');\n      let sorry = document.createTextNode(`\n        We're sorry, we could not retrieve any images from Flickr.\n        This is most likely connectivity issues, please make sure you are still connected to the internet.\n      `);\n\n      sorryMessage.appendChild(sorry);\n      document.body.appendChild(sorryMessage);\n      requestComplete();\n    };\n\n    document.body.appendChild(script);\n  }\n}\n","const SAVED = 'saved';\n\nexport default class DisplayImages {\n  constructor (imageContainer) {\n    this.imageContainer = imageContainer;\n    this.savedImages = JSON.parse(localStorage.getItem('savedImages')) || [];\n\n    if (imageContainer) {\n      this.bindEvents(imageContainer);\n    }\n  }\n\n  render(data) {\n    this.renderAssets(data.items);\n  }\n\n  renderSaved(callback) {\n    this.renderAssets(this.savedImages);\n    callback();\n  }\n\n  renderAssets(assets) {\n    let imageFragments = document.createDocumentFragment();\n\n    for (let i = 0, assetsLength = assets.length; i < assetsLength; i++) {\n      let asset = assets[i];\n      imageFragments.appendChild(this.renderAsset(asset));\n    }\n    this.imageContainer.appendChild(imageFragments);\n  }\n\n  renderAsset(asset) {\n    let imageCardClass = 'mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--8-col-phone mdl-card mdl-shadow--2dp';\n    let imageCard = document.createElement('article');\n    let imageSrc = asset;\n    let image = null;\n\n    if (typeof asset === 'object') {\n      let desc = document.createElement('div');\n      desc.innerHTML = asset.description;\n      image = desc.querySelector('img');\n      imageSrc = image.src;\n    }\n    else {\n      image = document.createElement('img');\n      image.src = imageSrc;\n    }\n\n    if (this.savedImage(imageSrc)) {\n      imageCardClass = `${imageCardClass} ${SAVED}`;\n    }\n    imageCard.className = imageCardClass;\n\n    let imageCardActions = document.createElement('div');\n    imageCardActions.className = 'mdl-card__actions';\n\n    let imageCardTitle = document.createElement('div');\n    imageCardTitle.className = 'card-image card-image__title';\n\n    if (asset.title) {\n      let imageTitle = document.createTextNode(asset.title);\n      imageCardTitle.appendChild(imageTitle);\n    }\n\n    let imageCardSaved = document.createElement('div');\n    imageCardSaved.className = 'card-image card-image__saved';\n\n    imageCardSaved.innerHTML = '&#x2665;';\n\n    imageCardActions.appendChild(imageCardTitle);\n    imageCardActions.appendChild(imageCardSaved);\n\n    imageCard.appendChild(image);\n    imageCard.appendChild(imageCardActions);\n    return imageCard;\n  }\n\n  bindEvents(imageContainer) {\n    imageContainer.addEventListener('click', e => this.selectedHandler(e));\n  }\n\n  selectedHandler(e) {\n    let target = e.target;\n\n    while (target.nodeName !== \"ARTICLE\" && target !== document) {\n      target = target.parentNode;\n    }\n\n    if (target === document) {\n      return;\n    }\n\n    target.classList.toggle(SAVED);\n    this.toggleSavedImage(target, target.querySelector('img'));\n  }\n\n  toggleSavedImage(imageCard, selectedImage) {\n    if (imageCard.classList.contains(SAVED)) {\n      this.savedImages.push(selectedImage.src);\n    }\n    else {\n      this.removeSavedImage(selectedImage.src);\n    }\n    this.setSavedImages();\n  }\n\n  removeSavedImage(selectedImage) {\n    for (let i = 0; i < this.savedImages.length; i++) {\n      let image = this.savedImages[i];\n      if (selectedImage === image) {\n        this.savedImages.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  setSavedImages() {\n    localStorage.removeItem('savedImages');\n    localStorage.setItem('savedImages', JSON.stringify(this.savedImages));\n  }\n\n  savedImage(imageSrc) {\n    let result = false;\n\n    for (let i = 0; i < this.savedImages.length; i++) {\n      let savedImage = this.savedImages[i];\n      if (imageSrc === savedImage) {\n        result = true;\n        break;\n      }\n    }\n    return result;\n  }\n}\n","import API from './api';\nimport DisplayImages from './display-images';\nimport PageLoader from './page-loader';\n\nconst TAGS = 'beautiful landscape';\nconst callback = 'dataHandler';\nconst URL_PATH = `http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=${callback}&tags=${TAGS}`;\nconst imageContainer = document.querySelector('[data-image-container]');\nlet lastAPICall = null;\nlet displayImages = new DisplayImages(imageContainer);\n\nlet urlRequest = function () {\n  lastAPICall = new API(URL_PATH, callback, displayImages.render.bind(displayImages), imageContainer);\n};\n\nurlRequest();\n\nlet renderSavedImages = function () {\n  lastAPICall.clearUI(imageContainer);\n  displayImages.renderSaved(lastAPICall.requestComplete);\n};\n\nnew PageLoader([\n  { page: 'index', callback: urlRequest },\n  { page: 'saved', callback: renderSavedImages }\n]);\n","const DEFAULT_NAV = document.querySelectorAll('[data-nav]');\nconst LAYOUT = document.querySelector('[data-mdl-layout]');\nconst DRAWER = document.querySelector('[data-drawer]');\n\nexport default class PageLoader {\n  constructor (pageCallbacks, navigations = DEFAULT_NAV) {\n    this.pageCallbacks = pageCallbacks;\n    this.bindEvents(navigations);\n  }\n\n  bindEvents(navigations) {\n    for (let i = 0, navigationsLength = navigations.length; i < navigationsLength; i++) {\n      navigations[i].addEventListener('click', e => this.pageEventHandler(e));\n    }\n  }\n\n  pageEventHandler(e) {\n    let target = e.target;\n    if (!target) {\n      return;\n    }\n\n    const DATA_ATTRIBUTE = 'data-page';\n\n    if (target.nodeName === 'SPAN' || target.nodeName === 'I') {\n      target = target.parentNode;\n    }\n\n    if (target.nodeName === \"A\" && target.hasAttribute(DATA_ATTRIBUTE)) {\n      this.loadPage(target.getAttribute(DATA_ATTRIBUTE));\n    }\n    e.preventDefault();\n  }\n\n  loadPage(page) {\n    if (LAYOUT && DRAWER && DRAWER.classList.contains('is-visible')) {\n      LAYOUT.MaterialLayout.toggleDrawer();\n    }\n\n    for (let i = 0, pageCallbacksLength = this.pageCallbacks.length; i < pageCallbacksLength; i++) {\n      let callbackOption = this.pageCallbacks[i];\n      if (callbackOption.page === page) {\n        callbackOption.callback();\n      }\n    }\n  }\n}\n"],"sourceRoot":"/source/"}