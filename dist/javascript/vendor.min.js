"use strict";System.register("javascript/api",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,o;return{setters:[],execute:function(){a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=document.querySelector("[data-loading-spinner]"),i=function(){return r.classList.remove("spinner--show")},o=function(){function e(t,a,r){n(this,e),this.loadUrl(t,a,r),this.requestComplete=i}return a(e,[{key:"clearUI",value:function(e){r.classList.add("spinner--show"),e&&(e.innerHTML="")}},{key:"error",value:function(){var e=document.createElement("div"),t=document.createTextNode("\n      We're sorry, we could not retrieve any images from Flickr.\n      This is most likely connectivity issues, please make sure you are still connected to the internet.\n    ");e.appendChild(t),document.body.appendChild(e),i()}},{key:"loadUrl",value:function(e,t,n){var a=this,r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=function(){4===r.readyState&&(200===r.status?(t(JSON.parse(r.responseText)),i()):a.error())},r.onerror=this.error,r.send(null),this.clearUI(n)}}]),e}(),e("default",o)}}}),System.register("javascript/display-images",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,o;return{setters:[],execute:function(){a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i="saved",o=function(){function e(t){n(this,e),this.imageContainer=t,this.savedImages=JSON.parse(localStorage.getItem("savedImages"))||[],t&&this.bindEvents(t)}return r(e,[{key:"render",value:function(e){var t=e.photos.photo;if(t.length)this.renderAssets(t);else{var n=document.createElement("div"),a=document.createTextNode("\n        We're sorry, we could not retrieve any images from Flickr matching your search.\n      ");n.appendChild(a),this.imageContainer.appendChild(n)}}},{key:"renderSaved",value:function(e){this.renderAssets(this.savedImages),e()}},{key:"renderAssets",value:function(e){for(var t=document.createDocumentFragment(),n=0,a=e.length;a>n;n++){var r=e[n];t.appendChild(this.renderAsset(r))}this.imageContainer.innerHTML="",this.imageContainer.appendChild(t)}},{key:"renderAsset",value:function(e){var t="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--8-col-phone mdl-card mdl-shadow--2dp",n=document.createElement("article"),r=e,o=document.createElement("img");if("object"===("undefined"==typeof e?"undefined":a(e))){var s=e.farm,c=e.server,l=e.id,u=e.secret;r="https://farm"+s+".staticflickr.com/"+c+"/"+l+"_"+u+"_c.jpg"}o.src=r,this.savedImage(r)&&(t=t+" "+i),n.className=t;var d=document.createElement("div");d.className="mdl-card__actions";var f=document.createElement("div");if(f.className="card-image card-image__title",e.title){var m=document.createTextNode(e.title);f.appendChild(m)}var v=document.createElement("div");return v.className="card-image card-image__saved",v.innerHTML="&#x2665;",d.appendChild(f),d.appendChild(v),n.appendChild(o),n.appendChild(d),n}},{key:"bindEvents",value:function(e){var t=this;e.addEventListener("click",function(e){return t.selectedHandler(e)})}},{key:"selectedHandler",value:function(e){for(var t=e.target;"ARTICLE"!==t.nodeName&&t!==document;)t=t.parentNode;t!==document&&(t.classList.toggle(i),this.toggleSavedImage(t,t.querySelector("img")))}},{key:"toggleSavedImage",value:function(e,t){e.classList.contains(i)?this.savedImages.push(t.src):this.removeSavedImage(t.src),this.setSavedImages()}},{key:"removeSavedImage",value:function(e){for(var t=0;t<this.savedImages.length;t++){var n=this.savedImages[t];if(e===n){this.savedImages.splice(t,1);break}}}},{key:"setSavedImages",value:function(){localStorage.removeItem("savedImages"),localStorage.setItem("savedImages",JSON.stringify(this.savedImages))}},{key:"savedImage",value:function t(e){for(var n=!1,a=0;a<this.savedImages.length;a++){var t=this.savedImages[a];if(e===t){n=!0;break}}return n}}]),e}(),e("default",o)}}}),System.register("javascript/main",["./api","./display-images","./page-loader","./search"],function(e,t){var n,a,r,i,o,s,c,l,u,d,f,m,v,h;return{setters:[function(e){n=e["default"]},function(e){a=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]}],execute:function(){o="7677e20284c7594041992c9bdd391d8a",s=24,c=1,l=document.querySelector("[data-image-container]"),u=function(){return i.searchBar().value},d=function(){return"https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+o+"&text="+u()+"&per_page="+s+"&page="+c+"&content_type=1&format=json&nojsoncallback=1"},f=null,m=new a(l),v=function(){u().length<3||(f=new n(d(),m.render.bind(m),l))},v(),h=function(){f.clearUI(l),m.renderSaved(f.requestComplete)},new r([{page:"index",callback:v},{page:"saved",callback:h}]),new i(v)}}}),System.register("javascript/page-loader",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,o,s;return{setters:[],execute:function(){a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=document.querySelectorAll("[data-nav]"),i=document.querySelector("[data-mdl-layout]"),o=document.querySelector("[data-drawer]"),s=function(){function e(t){var a=arguments.length<=1||void 0===arguments[1]?r:arguments[1];n(this,e),this.pageCallbacks=t,this.bindEvents(a)}return a(e,[{key:"bindEvents",value:function(e){for(var t=this,n=0,a=e.length;a>n;n++)e[n].addEventListener("click",function(e){return t.pageEventHandler(e)})}},{key:"pageEventHandler",value:function(e){var t=e.target;if(t){var n="data-page";"SPAN"!==t.nodeName&&"I"!==t.nodeName||(t=t.parentNode),"A"===t.nodeName&&t.hasAttribute(n)&&this.loadPage(t.getAttribute(n)),e.preventDefault()}}},{key:"loadPage",value:function(e){i&&o&&o.classList.contains("is-visible")&&i.MaterialLayout.toggleDrawer();for(var t=0,n=this.pageCallbacks.length;n>t;t++){var a=this.pageCallbacks[t];a.page===e&&a.callback()}}}]),e}(),e("default",s)}}}),System.register("javascript/search",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,o,s,c,l,u;return{setters:[],execute:function(){a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=document.querySelector("[data-search]"),i=document.querySelector("[data-mobile-search]"),o=document.querySelectorAll("[data-header-item]"),s=document.querySelector("[data-header-row]"),c=document.querySelector("[data-desktop-search]"),l=i.querySelector("i"),u=function(){function e(t){n(this,e),this.bindEvents(t),this.mobileSearch()}return a(e,[{key:"bindEvents",value:function(e){var t=this,n=setTimeout;r.addEventListener("keyup",function(a){t.testKey(a)&&(clearTimeout(n),n=setTimeout(e,400)),a.preventDefault()})}},{key:"testKey",value:function(e){var t=!1;if(e.key&&/[a-z]|[A-Z]|[0-9]/.test(e.key))t=!0;else if(e.keyCode){var n=e.keyCode;(n>45&&91>n||8===n)&&(t=!0),t=!1}return t}},{key:"mobileSearch",value:function(){i.addEventListener("click",this.toggleMobileSearch)}},{key:"toggleMobileSearch",value:function(){var e="add",t="remove",n="",a="search";"search"===l.innerHTML&&(e="remove",t="add",n="16px",a="cancel"),l.innerHTML=a,this.classList[e]("mdl-cell--hide-tablet","mdl-cell--hide-desktop");for(var r=0;r<o.length;r++)o[r].classList[t]("hidden");document.querySelector(".mdl-layout__drawer-button").classList[t]("hidden"),s.style.paddingLeft=n,c.classList[e]("mdl-cell--hide-phone","desktop")}}],[{key:"searchBar",value:function(){return r}}]),e}(),e("default",u)}}});
//# sourceMappingURL=vendor.min.js.map
