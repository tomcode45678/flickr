"use strict";System.register("javascript/api",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,s;return{setters:[],execute:function(){a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=document.querySelector("[data-loading-spinner]"),i=function(){return r.classList.remove("spinner--show")},s=function(){function e(t,a,r,s){n(this,e),this.setHandler(a,r),this.loadUrl(t,s),this.requestComplete=i}return a(e,[{key:"setHandler",value:function(e,t){window[e]=function(e){t(e),i()}}},{key:"clearUI",value:function(e){r.classList.add("spinner--show"),e&&(e.innerHTML="")}},{key:"loadUrl",value:function(e,t){var n=document.createElement("script");n.src=e,this.clearUI(t),n.onerror=function(){var e=document.createElement("div"),t=document.createTextNode("\n        We're sorry, we could not retrieve any images from Flickr.\n        This is most likely connectivity issues, please make sure you are still connected to the internet.\n      ");e.appendChild(t),document.body.appendChild(e),i()},document.body.appendChild(n)}}]),e}(),e("default",s)}}}),System.register("javascript/display-images",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,s;return{setters:[],execute:function(){a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i="saved",s=function(){function e(t){n(this,e),this.imageContainer=t,this.savedImages=JSON.parse(localStorage.getItem("savedImages"))||[],t&&this.bindEvents(t)}return r(e,[{key:"render",value:function(e){this.renderAssets(e.items)}},{key:"renderSaved",value:function(e){this.renderAssets(this.savedImages),e()}},{key:"renderAssets",value:function(e){for(var t=document.createDocumentFragment(),n=0,a=e.length;a>n;n++){var r=e[n];t.appendChild(this.renderAsset(r))}this.imageContainer.appendChild(t)}},{key:"renderAsset",value:function(e){var t="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--8-col-phone mdl-card mdl-shadow--2dp",n=document.createElement("article"),r=e,s=null;if("object"===("undefined"==typeof e?"undefined":a(e))){var o=document.createElement("div");o.innerHTML=e.description,s=o.querySelector("img"),r=s.src}else s=document.createElement("img"),s.src=r;this.savedImage(r)&&(t=t+" "+i),n.className=t;var l=document.createElement("div");l.className="mdl-card__actions";var c=document.createElement("div");if(c.className="card-image card-image__title",e.title){var d=document.createTextNode(e.title);c.appendChild(d)}var u=document.createElement("div");return u.className="card-image card-image__saved",u.innerHTML="&#x2665;",l.appendChild(c),l.appendChild(u),n.appendChild(s),n.appendChild(l),n}},{key:"bindEvents",value:function(e){e.addEventListener("click",this.selectedHandler.bind(this))}},{key:"selectedHandler",value:function(e){for(var t=e.target;"ARTICLE"!==t.nodeName&&t!==document;)t=t.parentNode;t.classList.toggle(i),this.toggleSavedImage(t,t.querySelector("img"))}},{key:"toggleSavedImage",value:function(e,t){e.classList.contains(i)?this.savedImages.push(t.src):this.removeSavedImage(t.src),this.setSavedImages()}},{key:"removeSavedImage",value:function(e){for(var t=0;t<this.savedImages.length;t++){var n=this.savedImages[t];if(e===n){this.savedImages.splice(t,1);break}}}},{key:"setSavedImages",value:function(){localStorage.removeItem("savedImages"),localStorage.setItem("savedImages",JSON.stringify(this.savedImages))}},{key:"savedImage",value:function t(e){for(var n=!1,a=0;a<this.savedImages.length;a++){var t=this.savedImages[a];if(e===t){n=!0;break}}return n}}]),e}(),e("default",s)}}}),System.register("javascript/main",["./api","./display-images","./page-loader"],function(e,t){var n,a,r,i,s,o,l,c,d,u,m;return{setters:[function(e){n=e["default"]},function(e){a=e["default"]},function(e){r=e["default"]}],execute:function(){i="beautiful landscape",s="dataHandler",o="http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback="+s+"&tags="+i,l=document.querySelector("[data-image-container]"),c=null,d=new a(l),u=function(){c=new n(o,s,d.render.bind(d),l)},u(),m=function(){c.clearUI(l),d.renderSaved(c.requestComplete)},new r([{page:"index",callback:u},{page:"saved",callback:m}])}}}),System.register("javascript/page-loader",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,s,o;return{setters:[],execute:function(){a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=document.querySelectorAll("[data-nav]"),i=document.querySelector("[data-mdl-layout]"),s=document.querySelector("[data-drawer]"),o=function(){function e(t){var a=arguments.length<=1||void 0===arguments[1]?r:arguments[1];n(this,e),this.pageCallbacks=t,this.bindEvents(a)}return a(e,[{key:"bindEvents",value:function(e){for(var t=0,n=e.length;n>t;t++)e[t].addEventListener("click",this.pageEventHandler.bind(this))}},{key:"pageEventHandler",value:function(e){var t=e.target;if(t){var n="data-page";"SPAN"===t.nodeName&&(t=t.parentNode),"A"===t.nodeName&&t.hasAttribute(n)&&this.loadPage(t.getAttribute(n)),e.preventDefault()}}},{key:"loadPage",value:function(e){i&&s&&s.classList.contains("is-visible")&&i.MaterialLayout.toggleDrawer();for(var t=0,n=this.pageCallbacks.length;n>t;t++){var a=this.pageCallbacks[t];a.page===e&&a.callback()}}}]),e}(),e("default",o)}}});
//# sourceMappingURL=vendor.min.js.map
