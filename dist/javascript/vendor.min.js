"use strict";System.register("javascript/display-images",[],function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,s,i;return{setters:[],execute:function(){n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s="selected",i=function(){function e(t){a(this,e),this.images=t.items,this.imageContainer=document.querySelector("[data-image-container]"),this.savedImages=JSON.parse(localStorage.getItem("savedImages"))||[],this.imageContainer&&(this.renderAssets(t.items),this.bindEvents())}return n(e,[{key:"renderAssets",value:function(e){for(var t=document.createDocumentFragment(),a=0,n=e.length;n>a;a++){var s=e[a];t.appendChild(this.renderAsset(s))}this.imageContainer.appendChild(t)}},{key:"renderAsset",value:function(e){var t=document.createElement("article"),a=document.createElement("div");a.innerHTML=e.description;var n=a.querySelector("img");return this.savedImage(n)&&n.classList.add(s),t.appendChild(n),t}},{key:"bindEvents",value:function(){this.imageContainer.addEventListener("click",this.selectedHandler.bind(this))}},{key:"selectedHandler",value:function(e){var t=e.target;"IMG"===t.nodeName&&(t.classList.toggle(s),this.toggleSavedImage(t)),e.preventDefault()}},{key:"toggleSavedImage",value:function(e){e.classList.contains(s)?this.savedImages.push(e.src):this.removeSavedImage(e.src),this.setSavedImages()}},{key:"removeSavedImage",value:function(e){for(var t=0;t<this.savedImages.length;t++){var a=this.savedImages[t];e===a&&this.savedImages.splice(t,1)}}},{key:"setSavedImages",value:function(){localStorage.removeItem("savedImages"),localStorage.setItem("savedImages",JSON.stringify(this.savedImages))}},{key:"savedImage",value:function t(e){for(var a=!1,n=0;n<this.savedImages.length;n++){var t=this.savedImages[n];if(e.src===t){a=!0;break}}return a}}]),e}(),e("default",i)}}}),System.register("javascript/main",["./display-images"],function(e,t){var a,n,s,i,r;return{setters:[function(e){a=e["default"]}],execute:function(){n="london",s="http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=dataHandler&tags="+n,i=document.querySelector("[data-loading-spinner]"),window.dataHandler=function(e){new a(e),i.classList.remove("spinner--show")},r=document.createElement("script"),r.src=s,r.onerror=function(){var e=document.createElement("div"),t=document.createTextNode("\n    We're sorry, we could not retrieve any images from Flickr.\n    This is most likely connectivity issues, please make sure you are still connected to the internet.\n  ");e.appendChild(t),document.body.appendChild(e),i.classList.remove("spinner--show")},document.body.appendChild(r)}}});
//# sourceMappingURL=vendor.min.js.map
