"use strict";System.register("javascript/api",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,l;return{setters:[],execute:function(){a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=document.querySelector("[data-loading-spinner]"),i=function(){return r.classList.remove("spinner--show")},l=function(){function e(t,a,r,l){n(this,e),this.setHandler(a,r),this.loadUrl(t,l),this.requestComplete=i}return a(e,[{key:"setHandler",value:function(e,t){window[e]=function(e){t(e),i()}}},{key:"clearUI",value:function(e){r.classList.add("spinner--show"),e&&(e.innerHTML="")}},{key:"loadUrl",value:function(e,t){var n=document.createElement("script");n.src=e,this.clearUI(t),n.onerror=function(){var e=document.createElement("div"),t=document.createTextNode("\n        We're sorry, we could not retrieve any images from Flickr.\n        This is most likely connectivity issues, please make sure you are still connected to the internet.\n      ");e.appendChild(t),document.body.appendChild(e),i()},document.body.appendChild(n)}}]),e}(),e("default",l)}}}),System.register("javascript/display-images",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,l;return{setters:[],execute:function(){a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i="saved",l=function(){function e(t){n(this,e),this.imageContainer=t,this.savedImages=JSON.parse(localStorage.getItem("savedImages"))||[],t&&this.bindEvents(t)}return r(e,[{key:"render",value:function(e){this.renderAssets(e.items)}},{key:"renderSaved",value:function(e){this.renderAssets(this.savedImages),e()}},{key:"renderAssets",value:function(e){for(var t=document.createDocumentFragment(),n=0,a=e.length;a>n;n++){var r=e[n];t.appendChild(this.renderAsset(r))}this.imageContainer.appendChild(t)}},{key:"renderAsset",value:function(e){var t="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--8-col-phone mdl-card mdl-shadow--2dp",n=document.createElement("article"),r=e,l=null;if("object"===("undefined"==typeof e?"undefined":a(e))){var o=document.createElement("div");o.innerHTML=e.description,l=o.querySelector("img"),r=l.src}else l=document.createElement("img"),l.src=r;this.savedImage(r)&&(t=t+" "+i),n.className=t;var c=document.createElement("div");c.className="mdl-card__actions";var s=document.createElement("div");if(s.className="card-image card-image__title",e.title){var d=document.createTextNode(e.title);s.appendChild(d)}var u=document.createElement("div");return u.className="card-image card-image__saved",u.innerHTML="&#x2665;",c.appendChild(s),c.appendChild(u),n.appendChild(l),n.appendChild(c),n}},{key:"bindEvents",value:function(e){var t=this;e.addEventListener("click",function(e){return t.selectedHandler(e)})}},{key:"selectedHandler",value:function(e){for(var t=e.target;"ARTICLE"!==t.nodeName&&t!==document;)t=t.parentNode;t!==document&&(t.classList.toggle(i),this.toggleSavedImage(t,t.querySelector("img")))}},{key:"toggleSavedImage",value:function(e,t){e.classList.contains(i)?this.savedImages.push(t.src):this.removeSavedImage(t.src),this.setSavedImages()}},{key:"removeSavedImage",value:function(e){for(var t=0;t<this.savedImages.length;t++){var n=this.savedImages[t];if(e===n){this.savedImages.splice(t,1);break}}}},{key:"setSavedImages",value:function(){localStorage.removeItem("savedImages"),localStorage.setItem("savedImages",JSON.stringify(this.savedImages))}},{key:"savedImage",value:function t(e){for(var n=!1,a=0;a<this.savedImages.length;a++){var t=this.savedImages[a];if(e===t){n=!0;break}}return n}}]),e}(),e("default",l)}}}),System.register("javascript/main",["./api","./display-images","./page-loader","./search"],function(e,t){var n,a,r,i,l,o,c,s,d,u,m,f;return{setters:[function(e){n=e["default"]},function(e){a=e["default"]},function(e){r=e["default"]},function(e){i=e["default"]}],execute:function(){l="beautiful landscape",o="dataHandler",c="http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback="+o+"&tags="+l,s=document.querySelector("[data-image-container]"),d=null,u=new a(s),m=function(){d=new n(c,o,u.render.bind(u),s)},m(),f=function(){d.clearUI(s),u.renderSaved(d.requestComplete)},new r([{page:"index",callback:m},{page:"saved",callback:f}]),(new i).mobileSearch()}}}),System.register("javascript/page-loader",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i,l,o;return{setters:[],execute:function(){a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=document.querySelectorAll("[data-nav]"),i=document.querySelector("[data-mdl-layout]"),l=document.querySelector("[data-drawer]"),o=function(){function e(t){var a=arguments.length<=1||void 0===arguments[1]?r:arguments[1];n(this,e),this.pageCallbacks=t,this.bindEvents(a)}return a(e,[{key:"bindEvents",value:function(e){for(var t=this,n=0,a=e.length;a>n;n++)e[n].addEventListener("click",function(e){return t.pageEventHandler(e)})}},{key:"pageEventHandler",value:function(e){var t=e.target;if(t){var n="data-page";"SPAN"!==t.nodeName&&"I"!==t.nodeName||(t=t.parentNode),"A"===t.nodeName&&t.hasAttribute(n)&&this.loadPage(t.getAttribute(n)),e.preventDefault()}}},{key:"loadPage",value:function(e){i&&l&&l.classList.contains("is-visible")&&i.MaterialLayout.toggleDrawer();for(var t=0,n=this.pageCallbacks.length;n>t;t++){var a=this.pageCallbacks[t];a.page===e&&a.callback()}}}]),e}(),e("default",o)}}}),System.register("javascript/search",[],function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,r,i;return{setters:[],execute:function(){a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=document.querySelector("[data-mobile-search]"),i=function(){function e(){n(this,e)}return a(e,[{key:"mobileSearch",value:function(){r.addEventListener("click",this.toggleMobileSearch)}},{key:"toggleMobileSearch",value:function(){if("search"===this.querySelector("i").innerHTML){this.querySelector("i").innerHTML="cancel",this.classList.remove("mdl-cell--hide-tablet","mdl-cell--hide-desktop");for(var e=document.querySelectorAll(".mdl-layout__drawer-button, .mdl-layout-title, .mdl-badge, .mdl-layout-spacer, .mdl-navigation"),t=0;t<e.length;t++)e[t].classList.add("hidden");document.querySelector(".mdl-layout__header-row").style.paddingLeft="16px";var n=document.querySelector(".mdh-expandable-search");n.classList.remove("mdl-cell--hide-phone"),n.style.margin="0 16px 0 0"}else{this.querySelector("i").innerHTML="search",this.classList.add("mdl-cell--hide-tablet","mdl-cell--hide-desktop");for(var a=document.querySelectorAll(".mdl-layout__drawer-button, .mdl-layout-title, .mdl-badge, .mdl-layout-spacer, .mdl-navigation"),r=0;r<a.length;r++)a[r].classList.remove("hidden");document.querySelector(".mdl-layout__header-row").style.paddingLeft="";var i=document.querySelector(".mdh-expandable-search");i.classList.add("mdl-cell--hide-phone"),i.style.margin="0 50px"}}}]),e}(),e("default",i)}}});
//# sourceMappingURL=vendor.min.js.map
