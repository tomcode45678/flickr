"use strict";System.register("javascript/api",[],function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,i,s;return{setters:[],execute:function(){n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=document.querySelector("[data-loading-spinner]"),i=function(){return r.classList.remove("spinner--show")},s=function(){function e(t,n,r,s){a(this,e),this.setHandler(n,r),this.loadUrl(t,s),this.requestComplete=i}return n(e,[{key:"setHandler",value:function(e,t){window[e]=function(e){new t(e),i()}}},{key:"clearUI",value:function(e){r.classList.add("spinner--show"),e&&(e.innerHTML="")}},{key:"loadUrl",value:function(e,t){var a=document.createElement("script");a.src=e,this.clearUI(t),a.onerror=function(){var e=document.createElement("div"),t=document.createTextNode("\n        We're sorry, we could not retrieve any images from Flickr.\n        This is most likely connectivity issues, please make sure you are still connected to the internet.\n      ");e.appendChild(t),document.body.appendChild(e),i()},document.body.appendChild(a)}}]),e}(),e("default",s)}}}),System.register("javascript/display-images",[],function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,i,s;return{setters:[],execute:function(){n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i="saved",s=function(){function e(t){a(this,e),this.imageContainer=document.querySelector("[data-image-container]"),this.savedImages=JSON.parse(localStorage.getItem("savedImages"))||[],this.imageContainer&&t&&(this.images=t.items,this.renderAssets(t.items),this.bindEvents())}return r(e,[{key:"renderAssets",value:function(e){for(var t=document.createDocumentFragment(),a=0,n=e.length;n>a;a++){var r=e[a];t.appendChild(this.renderAsset(r))}this.imageContainer.appendChild(t)}},{key:"renderAsset",value:function(e){var t="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--8-col-phone mdl-card mdl-shadow--2dp",a=document.createElement("article"),r=e,s=null;if("object"===("undefined"==typeof e?"undefined":n(e))){var o=document.createElement("div");o.innerHTML=e.description,s=o.querySelector("img"),r=s.src}else s=document.createElement("img"),s.src=r;this.savedImage(r)&&(t=t+" "+i),a.className=t;var c=document.createElement("div");c.className="mdl-card__actions";var l=document.createElement("div");if(l.className="card-image card-image__title",e.title){var d=document.createTextNode(e.title);l.appendChild(d)}var u=document.createElement("div");return u.className="card-image card-image__saved",u.innerHTML="&#x2665;",c.appendChild(l),c.appendChild(u),a.appendChild(s),a.appendChild(c),a}},{key:"bindEvents",value:function(){this.imageContainer.addEventListener("click",this.selectedHandler.bind(this))}},{key:"selectedHandler",value:function(e){for(var t=e.target;"ARTICLE"!==t.nodeName&&t!==document;)t=t.parentNode;t.classList.toggle(i),this.toggleSavedImage(t,t.querySelector("img"))}},{key:"toggleSavedImage",value:function(e,t){e.classList.contains(i)?this.savedImages.push(t.src):this.removeSavedImage(t.src),this.setSavedImages()}},{key:"removeSavedImage",value:function(e){for(var t=0;t<this.savedImages.length;t++){var a=this.savedImages[t];if(e===a){this.savedImages.splice(t,1);break}}}},{key:"setSavedImages",value:function(){localStorage.removeItem("savedImages"),localStorage.setItem("savedImages",JSON.stringify(this.savedImages))}},{key:"savedImage",value:function t(e){for(var a=!1,n=0;n<this.savedImages.length;n++){var t=this.savedImages[n];if(e===t){a=!0;break}}return a}},{key:"renderSaved",value:function(e){this.renderAssets(this.savedImages),e()}}]),e}(),e("default",s)}}}),System.register("javascript/main",["./api","./display-images","./page-loader"],function(e,t){var a,n,r,i,s,o,c,l,d,u;return{setters:[function(e){a=e["default"]},function(e){n=e["default"]},function(e){r=e["default"]}],execute:function(){i="beautiful landscape",s="dataHandler",o="http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback="+s+"&tags="+i,c=document.querySelector("[data-image-container]"),l=null,d=function(){l=new a(o,s,n,c)},d(),u=function(){var e=new n;l.clearUI(c),e.renderSaved(l.requestComplete)},new r([{page:"index",callback:d},{page:"saved",callback:u}])}}}),System.register("javascript/page-loader",[],function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,i,s,o;return{setters:[],execute:function(){n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=document.querySelectorAll("[data-nav]"),i=document.querySelector("[data-mdl-layout]"),s=document.querySelector("[data-drawer]"),o=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?r:arguments[1];a(this,e),this.pageCallbacks=t,this.bindEvents(n)}return n(e,[{key:"bindEvents",value:function(e){for(var t=0,a=e.length;a>t;t++)e[t].addEventListener("click",this.pageEventHandler.bind(this))}},{key:"pageEventHandler",value:function(e){var t=e.target;if(t){var a="data-page";"SPAN"===t.nodeName&&(t=t.parentNode),"A"===t.nodeName&&t.hasAttribute(a)&&this.loadPage(t.getAttribute(a)),e.preventDefault()}}},{key:"loadPage",value:function(e){i&&s&&s.classList.contains("is-visible")&&i.MaterialLayout.toggleDrawer();for(var t=0,a=this.pageCallbacks.length;a>t;t++){var n=this.pageCallbacks[t];n.page===e&&n.callback()}}}]),e}(),e("default",o)}}});
//# sourceMappingURL=vendor.min.js.map
